Для запуска проекта нужно выполнить установку зависимостей через composer.
 
Ветка highload содержит решение для больших нагрузок.

В данном решении использован фреймворк, и само решение выполнено так, что подразумевает гибкость и расширяемость.

POST /country добавить значение для страны, параметры  country=<country_code>

GET /country получить статистику по странам


Для каждой страны сделан уникальный ключ, происходит инкремент значения в ключе. Обновление в поля в хэш-таблице или обычного ключа имеет сложность О(1).

Получение же данных при работе что с таблицей, что с ключами имеет сложность O(n).

Чтобы свести сложность получения данных с общей статистикой под единичную сложность создан ключ кеша, в нем храниться набор значений.
Обновление кеша производится через команду app:update-cache.

Общая логика работы, один контроллер обновляет счетчики по стране, второй отдает кешированные данные о статистике, с заданной периодичностью запускается команда на обновление кеша. Пока идет обновление кеша, на момент записи ключа, запросы его жду - возможны провисания.

Если же сервису нужно использовать всегда актуальные данные по статистике - то тогда нужно использовать класс RedisAccessor для получения данных прямо из редиса.
